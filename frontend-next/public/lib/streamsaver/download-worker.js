/* eslint-disable */
/**
 这是依赖 streamsaver(v2.0.6) 的源文件（压缩版本）
 因为直接使用包导入并不会导入中间人页面和ServiceWorker，所以只能手动整合了
 在 Github https://github.com/jimmywarting/StreamSaver.js 仓库
 */
self.addEventListener("install",()=>{self.skipWaiting()}),self.addEventListener("activate",e=>{e.waitUntil(self.clients.claim())});const e=new Map;self.onmessage=t=>{if("ping"===t.data)return;const n=t.data,s=n.url||self.registration.scope+Math.random()+"/"+("string"==typeof n?n:n.filename),a=t.ports[0],o=new Array(3);o[1]=n,o[2]=a,t.data.readableStream?o[0]=t.data.readableStream:t.data.transferringReadable?a.onmessage=e=>{a.onmessage=null,o[0]=e.data.readableStream}:o[0]=function(e){return new ReadableStream({start(t){e.onmessage=({data:e})=>{if("end"===e)return t.close();"abort"!==e?t.enqueue(e):t.error("Aborted the download")}},cancel(t){console.log("user aborted",t),e.postMessage({abort:!0})}})}(a),e.set(s,o),a.postMessage({download:s})},self.onfetch=t=>{const n=t.request.url;if(n.endsWith("/ping"))return t.respondWith(new Response("pong"));const s=e.get(n);if(!s)return null;const[a,o,r]=s;e.delete(n);const i=new Headers({"Content-Type":"application/octet-stream; charset=utf-8","Content-Security-Policy":"default-src 'none'","X-Content-Security-Policy":"default-src 'none'","X-WebKit-CSP":"default-src 'none'","X-XSS-Protection":"1; mode=block","Cross-Origin-Embedder-Policy":"require-corp"});let l=new Headers(o.headers||{});l.has("Content-Length")&&i.set("Content-Length",l.get("Content-Length")),l.has("Content-Disposition")&&i.set("Content-Disposition",l.get("Content-Disposition")),o.size&&(console.warn("Depricated"),i.set("Content-Length",o.size));let d="string"==typeof o?o:o.filename;d&&(console.warn("Depricated"),d=encodeURIComponent(d).replace(/['()]/g,escape).replace(/\*/g,"%2A"),i.set("Content-Disposition","attachment; filename*=UTF-8''"+d)),t.respondWith(new Response(a,{headers:i})),r.postMessage({debug:"Download started"})}