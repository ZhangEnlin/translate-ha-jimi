<!--
 这是依赖 streamsaver(v2.0.6) 的源文件（压缩版本）
 因为直接使用包导入并不会导入中间人页面和ServiceWorker，所以只能手动整合了
 在 Github https://github.com/jimmywarting/StreamSaver.js 仓库
-->
<script>let e=()=>{e=()=>{};var a=location.href.substr(0,location.href.lastIndexOf("/"))+"/ping",t=setInterval(()=>{r?r.postMessage("ping"):fetch(a).then(e=>e.text(!e.ok&&clearInterval(t)))},1e4)},a=[];window.onmessage=e=>a.push(e);let r=null,t="";function n(a){let{data:n,ports:o,origin:s}=a;if(!o||!o.length)throw new TypeError("[StreamSaver] You didn't send a messageChannel");if("object"!=typeof n)throw new TypeError("[StreamSaver] You didn't send a object");n.origin=s,n.referrer=n.referrer||document.referrer||s,n.streamSaverVersion=new URLSearchParams(location.search).get("version"),"1.2.0"===n.streamSaverVersion&&console.warn("[StreamSaver] please update streamsaver"),n.headers?new Headers(n.headers):console.warn("[StreamSaver] pass `data.headers` that you would like to pass along to the service worker\nit should be a 2D array or a key/val object that fetch's Headers api accepts"),"string"==typeof n.filename&&(console.warn("[StreamSaver] You shouldn't send `data.filename` anymore. It should be included in the Content-Disposition header option"),n.filename=n.filename.replace(/\//g,":")),n.size&&console.warn("[StreamSaver] You shouldn't send `data.size` anymore. It should be included in the content-length header option"),n.readableStream&&console.warn("[StreamSaver] You should send the readableStream in the messageChannel, not throught mitm"),n.pathname||(console.warn("[StreamSaver] Please send `data.pathname` (eg: /pictures/summer.jpg)"),n.pathname=Math.random().toString().slice(-6)+"/"+n.filename),n.pathname=n.pathname.replace(/^\/+/g,"");let i=s.replace(/(^\w+:|^)\/\//,"");if(n.url=new URL(`${t+i}/${n.pathname}`).toString(),!n.url.startsWith(t+i+"/"))throw new TypeError("[StreamSaver] bad `data.pathname`");const l=n.readableStream?[o[0],n.readableStream]:[o[0]];return n.readableStream||n.transferringReadable||e(),r.postMessage(n,l)}window.opener&&window.opener.postMessage("StreamSaver::loadedPopup","*"),navigator.serviceWorker&&navigator.serviceWorker.getRegistration("./").then(e=>e||navigator.serviceWorker.register("download-worker.js",{scope:"./"})).then(e=>{const a=e.installing||e.waiting;return t=e.scope,(r=e.active)||new Promise(t=>{a.addEventListener("statechange",fn=()=>{"activated"===a.state&&(a.removeEventListener("statechange",fn),r=e.active,t())})})}).then(()=>{window.onmessage=n,a.forEach(window.onmessage)}),e()</script>
